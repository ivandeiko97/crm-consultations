{"version":3,"sources":["webpack:///./src/mixins/mixinEditOrAddPatient.js","webpack:///./src/components/EditPatient.vue?189e","webpack:///src/components/EditPatient.vue","webpack:///./src/components/EditPatient.vue?fd87","webpack:///./src/components/EditPatient.vue"],"names":["data","valid","name","nameRules","v","surname","surnameRules","patronymic","birthday","birthdayRules","male","maleRules","errorMale","insurance","insuranceRules","checkInsurance","methods","mapActions","validate","this","$refs","form","createPatient","Date","parse","replace","clearData","resetValidation","showNotification","text","isSuccess","SHOW_NOTIFICATION","setTimeout","HIDE_NOTIFICATION","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","ref","model","value","callback","$$v","expression","on","$event","savePatient","staticRenderFns","mixins","mixinEditOrAddPatient","computed","watch","PATIENT","setPatientData","patient","$store","dispatch","$router","back","mounted","component","VCard","VForm"],"mappings":"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","file":"js/chunk-afd969c8.3ed8e74e.js","sourcesContent":["import { checkInsurance } from '../helpers'\r\nimport { mapActions } from 'vuex'\r\n\r\nexport default {\r\n  data: () => ({\r\n    valid: true,\r\n    name: '',\r\n    nameRules: [\r\n      v => !!v || 'Имя обязательно',\r\n    ],\r\n    surname: '',\r\n    surnameRules: [\r\n      v => !!v || 'Фамилия обязательна',\r\n    ],\r\n    patronymic: '',\r\n    birthday: '',\r\n    birthdayRules: [\r\n      v => !!v || 'Дата рождения обязательна',\r\n    ],\r\n    male: '',\r\n    maleRules: [\r\n      v => !!v || 'Выберите пол',\r\n    ],\r\n    errorMale: false,\r\n    insurance: '',\r\n    insuranceRules: [\r\n      v => !!v || 'СНИЛС обязателен',\r\n      checkInsurance\r\n    ]\r\n  }),\r\n  methods: {\r\n    ...mapActions('notifications', ['SHOW_NOTIFICATION', 'HIDE_NOTIFICATION']),\r\n    validate () {\r\n      this.$refs.form.validate()\r\n    },\r\n    createPatient() {\r\n      return {\r\n        name: this.name,\r\n        surname: this.surname,\r\n        patronymic: this.patronymic,\r\n        birthday: Date.parse(this.birthday),\r\n        male: this.male,\r\n        insurance: this.insurance.replace(/\\s/g, ''),\r\n      }\r\n    },\r\n    clearData() {\r\n      this.name = ''\r\n      this.surname = ''\r\n      this.patronymic = ''\r\n      this.birthday = ''\r\n      this.male = ''\r\n      this.insurance = ''\r\n      this.$refs.form.resetValidation()\r\n    },\r\n    showNotification(text, isSuccess) {\r\n      this.SHOW_NOTIFICATION({ text, isSuccess })\r\n      setTimeout(this.HIDE_NOTIFICATION, 1000)\r\n    }\r\n  },\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"d-flex justify-center ma-auto pa-3\",attrs:{\"width\":\"300\"}},[_c('v-form',{ref:\"form\",staticClass:\"d-flex flex-column\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('base-input',{attrs:{\"value\":_vm.name,\"rules\":_vm.nameRules,\"label\":\"Имя*\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}),_c('base-input',{attrs:{\"rules\":_vm.surnameRules,\"label\":\"Фамилия*\",\"required\":\"\"},model:{value:(_vm.surname),callback:function ($$v) {_vm.surname=$$v},expression:\"surname\"}}),_c('base-input',{attrs:{\"label\":\"Отчество\"},model:{value:(_vm.patronymic),callback:function ($$v) {_vm.patronymic=$$v},expression:\"patronymic\"}}),_c('base-date-picker',{attrs:{\"date\":_vm.birthday,\"rules\":_vm.birthdayRules},on:{\"change-date\":function($event){_vm.birthday = $event}}}),_c('base-radio-male',{attrs:{\"value\":_vm.male,\"rules\":_vm.maleRules},model:{value:(_vm.male),callback:function ($$v) {_vm.male=$$v},expression:\"male\"}}),_c('base-input',{attrs:{\"rules\":_vm.insuranceRules,\"label\":\"СНИЛС*\"},model:{value:(_vm.insurance),callback:function ($$v) {_vm.insurance=$$v},expression:\"insurance\"}}),_c('base-button',{staticClass:\"mt-3\",attrs:{\"text\":\"Сохранить\"},on:{\"click\":_vm.savePatient}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card\r\n    class=\"d-flex justify-center ma-auto pa-3\"\r\n    width=\"300\"\r\n  >\r\n    <v-form\r\n      ref=\"form\"\r\n      v-model=\"valid\"\r\n      class=\"d-flex flex-column\"\r\n    >\r\n      <base-input\r\n        v-model=\"name\"\r\n        :value=\"name\"\r\n        :rules=\"nameRules\"\r\n        label=\"Имя*\"\r\n      />\r\n      <base-input\r\n        v-model=\"surname\"\r\n        :rules=\"surnameRules\"\r\n        label=\"Фамилия*\"\r\n        required\r\n      />\r\n      <base-input\r\n        v-model=\"patronymic\"\r\n        label=\"Отчество\"\r\n      />\r\n      <base-date-picker\r\n        :date=\"birthday\"\r\n        :rules=\"birthdayRules\"\r\n        @change-date=\"birthday = $event\"\r\n      />\r\n      <base-radio-male\r\n        v-model=\"male\"\r\n        :value=\"male\"\r\n        :rules=\"maleRules\"\r\n      />\r\n       <base-input\r\n        v-model=\"insurance\"\r\n        :rules=\"insuranceRules\"\r\n        label=\"СНИЛС*\"\r\n      />\r\n      <base-button \r\n        text=\"Сохранить\" \r\n        @click=\"savePatient\"\r\n        class=\"mt-3\"\r\n      />\r\n    </v-form>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport mixinEditOrAddPatient from '@/mixins/mixinEditOrAddPatient'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  name: 'edit-patient',\r\n  mixins: [mixinEditOrAddPatient],\r\n  computed: {\r\n    ...mapGetters('patients', ['PATIENT'])\r\n  },\r\n  watch: {\r\n    PATIENT() {\r\n      this.setPatientData()\r\n    }\r\n  },\r\n  methods: {\r\n    setPatientData() {\r\n      const patient = this.PATIENT\r\n\r\n      if (!patient) return\r\n\r\n      const {\r\n        name,\r\n        surname,\r\n        patronymic,\r\n        birthday,\r\n        male,\r\n        insurance,\r\n      } = patient\r\n\r\n      this.name = name\r\n      this.surname = surname\r\n      this.patronymic = patronymic\r\n      this.birthday = birthday\r\n      this.male = male\r\n      this.insurance = insurance\r\n    },\r\n    savePatient() {\r\n      this.validate()\r\n       \r\n      if (this.valid) {\r\n        const patient = this.createPatient()\r\n        this.$store.dispatch('patients/EDIT_PATIENT', {...patient, id: this.$route.params.id })\r\n        this.$router.back()\r\n        this.showNotification('Данные пациента изменены', true)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setPatientData()\r\n  }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPatient.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPatient.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPatient.vue?vue&type=template&id=de62c486&\"\nimport script from \"./EditPatient.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPatient.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\ninstallComponents(component, {VCard,VForm})\n"],"sourceRoot":""}